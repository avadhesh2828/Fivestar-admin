<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <div class="row">
          <div class="col-12 col-sm-3">
            <div class="input-group">
              <select class="form-control" [(ngModel)]="params['team_name']" name="team">
                <option value=''>
                  All Teams
                </option>
                <ng-container *ngFor="let team of teams">
                  <option [value]="team">
                    {{team}}
                  </option>
                </ng-container>
              </select>
            </div>
          </div>
          <div class="col-12 col-sm-2">
            <div class="input-group">
              <select class="form-control" [(ngModel)]="params['position_type']" name="position_type"
                (change)="positionTypeChange()">
                <option value=''>All Position Type</option>
                <option *ngFor="let positionType of allPositionTypes" [value]="positionType">
                  {{positionType}}
                </option>
              </select>
            </div>
          </div>
          <div class="col-12 col-sm-2">
            <div class="input-group">
              <select class="form-control" [(ngModel)]="params['position']" name="position">
                <option [value]="''">All Position</option>
                <ng-container *ngFor="let position of allPositions">
                  <option [value]="position"
                    *ngIf="(params['position_type']==''|| position.position_type == params['position_type'])">
                    {{position}}
                  </option>
                </ng-container>
              </select>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-12 col-sm-5">
            <div class="input-group">
              <input type="text" id="dates" name="playerName" [(ngModel)]="params['playerName']" class="form-control"
                placeholder="Player Name" autocomplete="off" (ngModelChange)="search()">
            </div>
          </div>
          <div class="col-12 col-sm-5">
            <span class="input-group-prepend">
              <button class="btn btn-primary" type="button" (click)="searchFilter();"> <i class="fa fa-filter"></i>
                Filter</button>&nbsp;
              <button class="btn btn-warning" (click)="searchFilter('reset');"><i class="fa fa-refresh"></i>
                Reset Filters</button>
            </span>
          </div>
        </div>

      </div>
      <div class="card-body custom-listing-table">

        <div class="d-sm-flex align-items-center justify-content-between mb-4">
          <h1 class="h3 mb-0 text-gray-800">
            Players List
          </h1>
          <a class="btn back-btn" routerLink="/matches">
            <i class="icon-arrow-left-circle" aria-hidden="true"></i>
          </a>
        </div>
        <div class="row">
          <div class="col-sm-12">
            <div class="card shadow mb-4">
              <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                  Players
                  <span class="mb-0 text-gray-800 pull-right">{{'Total Records : '+totalplayers}}</span>
                </h6>
              </div>

              <table class="table table-responsive-sm table-bordered table-striped table-sm"
                style="margin-bottom: 0px;">
                <thead>
                  <tr>
                    <th>Player Id</th>
                    <th>Position</th>
                    <th>Position Type</th>
                    <th>Player Name</th>
                    <th>Team Name</th>
                    <th>Salary ($)</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>

                  <tr *ngIf="error">
                    <td colspan="9" class="table-danger">There was an error</td>
                  </tr>
                  <tr *ngIf="!error && !playersList">
                    <td colspan="9">Loading...</td>
                  </tr>
                  <tr *ngFor="let player of playersList">
                    <td>{{ player.player_unique_id }}</td>
                    <td>{{ player.position }}</td>
                    <td>{{ player.position_type || "-"}}</td>
                    <td>{{ player.player_name }}
                      <span class="fa fa-info-circle" *ngIf="player.injury_status" data-toggle="tooltip"
                        data-placement="top" title="{{player.injury_status}}"></span>
                    </td>
                    <td>{{ player.team_name + ' (' + player.team_abbr+')' }} </td>
                    <td>{{ player.salary }} </td>
                    <td>
                      <a routerLink="/players/{{player.player_id}}">
                        <i class="icon-list"></i>&nbsp;Details
                      </a>
                    </td>
                  </tr>
                  <tr *ngIf="!error && playersList && playersList.length === 0">
                    <td colspan="9" class="text-center">There are no players to be shown</td>
                  </tr>
                </tbody>
              </table>

              <nav class="card-footer" *ngIf="totalplayers > params.per_page">
                <ul class="pagination" style="margin-bottom: 0px;">
                  <li class="page-item" *ngIf="params.current_page > 1">
                    <a class="page-link" href="javascript:void(0);" (click)="nextOrPreviousPage(-1)">Prev</a>
                  </li>
                  <li class="page-item active" [ngClass]="{'active': (page == params.current_page)}"
                    *ngFor="let page of totalPaginationShow">
                    <a class="page-link" href="javascript:void(0);" (click)="paginateList(page)">{{ page }}</a>
                  </li>
                  <li class="page-item" *ngIf="params.current_page != totalPages">
                    <a class="page-link" href="javascript:void(0);" (click)="nextOrPreviousPage(1)">Next</a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
